{% extends "base.html" %}
{% load i18n static %}
{% block title %}{% trans 'Actualiser ' %}{{car.name}}{% endblock title %}
{% block content %}
{% include 'includes/header.html' %}
<div class="container form-container d-flex">
    <div class="abstract-form v-abstract-form mx-auto my-auto">
        {% if form.errors %}
            <div class="alert alert-danger alert-dismissible" role="alert">
                <div id="form_errors">
                    {% for key, value in form.errors.items %}
                    <strong>{{ value }}</strong>
                    {% endfor %}
                </div>
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            {% endif %}
        <div class="text-center">
            <img src="{% static 'assets/img/top-illustration/toy_car.svg' %}" alt="Charges sharing" class="form-top-illustration">
        </div>
        <h3 class="text-center">{% trans 'Actualiser' %} {{car.name}}</h3>
        <div class="row justify-content-center">
            <div class="form-content">
                <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                        <div class="form-group">
                            <label>{% trans 'Nom du véhicule' %}<span class="">*</span>:</label>
                            {{ form.name }}
                        </div>
                        <div class="form-group">
                            <label>{% trans 'Immatriculation' %}:</label>
                            {{ form.immatriculation }}
                        </div>
                        <div class="form-group">
                            <label>{% trans "Prix d'achat" %}<span class="">*</span>:</label>
                            {{ form.price }}
                        </div>

                        <div class="form-group">
                            <label>{% trans "Énergie" %}<span class="">*</span>:</label>
                            {{ form.energy }}
                        </div>

                        <div class="form-group">
                            <label>{% trans "Nombre de co-propriétaires" %}<span class="">*</span>:</label>
                            {{ form.nb_users }}
                        </div>
                        
                        <label>{% trans "Contribution à l'achat" %}<span class="">*</span>:</label>
                        <div class="form-group text-center">
                        {% for i in paid_by %}
                            <div class="profile-minicard mt-3">
                                <img src={{i.user.avatar.url}} alt="{{ i.user.username }}">
                                <p>{{ i.user.username }}</p>
                                <button type="submit" class="amount-info" name="participation" value={{i.id}}>{{i.price_paid}} €</button>   
                            </div>
                        {% endfor %}
                        </div>
                
                        <p>*  {% trans 'Champs obligatoires' %}</p>
                        <div class="row justify-content-center">
                            <button type="submit" class="btn btn-kdark rounded-btn" name="update_car">{% trans 'Enregistrer' %}</button>
                        </div>
                </form>
            </div>
         </div>
    </div>
</div>

   

{% endblock content %}